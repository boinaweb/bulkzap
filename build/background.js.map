{"version":3,"file":"background.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4CAA4C;AACrE,KAAK;AACL,wCAAwC,+BAA+B;AACvE;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sBAAsB;AAClE;AACA,CAAC;AACD;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6BAA6B;AAC7C;AACA;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,gBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4CAA4C,mBAAmB,yBAAyB;AACjH,KAAK;AACL;AACA,4BAA4B,kBAAkB,eAAe;AAC7D,KAAK;AACL;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA","sources":["webpack://boinasender/./src/background.js"],"sourcesContent":["var numeroJanela = -1;\r\nvar whatsapp_tab_id = -1;\r\nvar telefones_permitidos = [];\r\n\r\nchrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {\r\n\tconsole.log(\"\\n\\n\\n------------------------------------init-----------------------------------------------\");\r\n\r\n\tswitch(request.type){\r\n\t\tcase \"button_sendAutoAll\":\r\n\t\t\tsendToAllContactsAuto(request);\r\n\t\t\tbreak;\r\n\t\tcase \"button_sendManualAll\":\r\n\t\t\tsendToAllContactsManual(request);\r\n\t\t\tbreak;\r\n\t\tcase \"button_openTabWhatsapp\":\r\n\t\t\tabrirAbaWhatsapp();\r\n\t\t\tbreak;\r\n\t}\r\n});\r\n\r\nchrome.browserAction.onClicked.addListener(function (tab) {\r\n\t// for the current tab, inject the \"inject.js\" file & execute it\r\n\tchrome.tabs.executeScript(tab.ib, {\r\n\t\tfile: 'js/wapi.js'\r\n\t});\r\n});\r\n\r\n\r\n\r\n\r\nchrome.runtime.onStartup.addListener(function () {\r\n\tconsole.log(\"Plugin Startup\");\t\t\t\r\n\r\n});\r\n\r\nchrome.runtime.onInstalled.addListener(function () {\r\n\tconsole.log(\"Plugin installed\");\r\n\t inicializarTabs();\r\n});\r\n\r\n\r\nfunction inicializarTabs() {\r\n\twhatsapp_tab_id = -1;\r\n\tnumeroJanela = -1;\r\n\tvar abas = new Array();\r\n\r\n\tchrome.windows.getCurrent(function(win) {\r\n    \tchrome.tabs.getAllInWindow(win.id, function(tabs) {\r\n\t        abas = tabs;\r\n\t\t\tconsole.debug(abas);\r\n\r\n\t\t\tvar i;\r\n\t\t\tfor (i = 0; i < abas.length; i++) {\r\n\t\t\t\tvar aba = abas[i];\r\n\t\t\t    if (~aba.url.indexOf(\"web.whatsapp.com\")) {\r\n\t\t\t    \twhatsapp_tab_id = aba.id;\r\n\t\t\t    }\r\n\t\t  \t}\r\n\r\n\t\t\tif (whatsapp_tab_id == -1) {\r\n\t\t\t\tchrome.tabs.create({ url: 'https://web.whatsapp.com/', index : 1});\r\n\t\t\t} else {\r\n\t\t\t\tchrome.tabs.update(whatsapp_tab_id,{url:\"https://web.whatsapp.com\"});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t});\r\n}\r\n\r\nchrome.webNavigation.onCompleted.addListener(function(details) {\r\n\tif (~details.url.indexOf(\"https://web.whatsapp.com/\")) {\r\n\t\tconsole.log(\"Open page - web.whatsapp.com\");\t\r\n\t\twhatsapp_tab_id = details.tabId;\r\n\t\tchrome.tabs.executeScript(details.tabId, {file: \"js/content.js\"});\r\n\t}\r\n});\r\n\r\n\r\nfunction clientMessage(data, funcPre = () => {}) {\r\n\tfuncPre();\r\n\tchrome.tabs.sendMessage(whatsapp_tab_id, data);\r\n}\r\n\r\nchrome.runtime.onMessage.addListener(function(data, sender) {\r\n\tif (sender.tab) {\r\n\t\tswitch(data.type) {\r\n\t\t  case \"init\":\r\n\t\t    console.log('Init received on page whatsapp');\r\n\t\t    init();\r\n\t\t    break;\r\n\t\t  case \"logout\":\r\n\t\t    console.log('Logout received on page whatsapp');\r\n\t\t    logout();\r\n\t\t    break;\r\n\t\t  case \"start\":\r\n\t\t  \tconsole.log('Start received on page whatsapp');\r\n\t\t    start();\r\n\t\t    break;\r\n\t\t  case \"pause\":\r\n\t\t    console.log('Pause received on page whatsapp');\r\n\t\t    pause();\r\n\t\t    break;\r\n\t\t  default:\r\n\t\t}\r\n\t}\r\n});\r\n\r\nfunction cheksIsNotNull(obj) {\r\n  return obj !== null && obj !== undefined;\r\n}\r\n\r\nfunction sendToAllContactsManual(data){\r\n\tconst {message, image} = data;\r\n\tdata.typestart = 'sendToAllContactsManual';\r\n\tconsole.log('sendToAllContactsMBackground', message, image);\r\n\tclientMessage(data);\r\n}\r\n\r\nfunction sendToAllContactsAuto(data){\r\n\tconst {message, image} = data;\r\n\tdata.typestart = 'sendToAllContactsAuto';\r\n\tconsole.log('sendToAllContactsABackground', message, image);\r\n\tclientMessage(data);\r\n}\r\n\r\nfunction sendMessage(message, remetente){\r\n\tvar json = {\"type\" : \"text\", \"numberPhone\" : remetente, \"message\" : message};\r\n\tclientMessage(json);\r\n}\r\n\r\nfunction sendMidia(message, remetente, base64){\r\n\tvar json = {\"type\" : \"media\", \"numberPhone\" : remetente, \"message\" : message, \"image\":base64};\r\n\tclientMessage(json);\r\n}\r\n\r\nfunction init() {\r\n\tif (localStorage.getItem('pause')) {\r\n\t\tpause();\r\n\t} else{\r\n\t\tstart();\r\n\t\tsetTimeout(sendWaitMessage,5000);\r\n\t}\r\n}\r\n\r\nfunction sendWaitMessage() {\r\n\tclientMessage({typestart : \"waitformessage\"});\r\n}\r\n\r\nfunction start() {\r\n\tconsole.log(\"logged\");\r\n\tclientMessage({typestart : \"logged\"}, () => localStorage.removeItem('pause'));\r\n}\r\n\r\nfunction pause() {\r\n\tclientMessage({typestart : \"paused\"}, () => localStorage.setItem('pause', true));\r\n}\r\n\r\nfunction logout() {\r\n\tconsole.log(\"logout\")\r\n}\r\n\r\n\r\n\r\nfunction abrirAbaWhatsapp(){\r\n\twhatsapp_tab_id = -1;\r\n\tvar abas = new Array();\r\n\tchrome.windows.getCurrent(function(win) {\r\n    \tchrome.tabs.getAllInWindow(win.id, function(tabs) {\r\n\t        abas = tabs;\r\n\t\t\tconsole.debug(abas);\r\n\t\t\tvar i;\r\n\t\t\tfor (i = 0; i < abas.length; i++) {\r\n\t\t\t\tvar aba = abas[i];\r\n\t\t\t    if (~aba.url.indexOf(\"web.whatsapp.com\")) {\r\n\t\t\t    \twhatsapp_tab_id = aba.id;\r\n\t\t\t    }\r\n\t\t\t  }\r\n\t\t  \tif (whatsapp_tab_id == -1) {\r\n\t\t\t\tchrome.tabs.create({ url: 'https://web.whatsapp.com/', index : 1}, function(abaId) {whatsapp_tab_id = abaId;});\t\t\r\n\t\t\t} else {\r\n\t\t\t\tchrome.tabs.get(whatsapp_tab_id, function(tab) {\r\n\t\t\t\t\tchrome.tabs.highlight({'tabs': tab.index}, function() {});\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t});\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":[],"sourceRoot":""}